<div class="container mt-5" style="max-width: 600px;">
  <h1><%= @flow&.id ? "Modifica Flusso di Stampa" : "Nuovo Flusso di Stampa" %></h1>

  <% if @error %>
    <div class="alert alert-danger"><%= @error %></div>
  <% end %>

  <form action="<%= @flow&.id ? "/print_flows/#{@flow.id}" : "/print_flows" %>" method="post">
    <% if @flow&.id %>
      <input type="hidden" name="_method" value="PUT">
    <% end %>

    <div class="mb-3">
      <label for="name" class="form-label">Nome Flusso *</label>
      <input type="text" class="form-control" id="name" name="name" value="<%= @flow&.name %>" required>
      <small class="text-muted">Es: "Pre-press â†’ Print Color", "B&W Production"</small>
    </div>

    <div class="mb-3">
      <label for="preprint_hook_path" class="form-label">Webhook Pre-Stampa *</label>
      <input type="text" class="form-control" id="preprint_hook_path" name="preprint_hook_path" value="<%= @flow&.preprint_hook_path %>" placeholder="/api/preprint" required>
      <small class="text-muted">Path relativo (es: /api/jobs/preprint). La URL base viene da SWITCH_WEBHOOK_BASE_URL</small>
    </div>

    <div class="mb-3">
      <label for="print_hook_path" class="form-label">Webhook Stampa *</label>
      <input type="text" class="form-control" id="print_hook_path" name="print_hook_path" value="<%= @flow&.print_hook_path %>" placeholder="/api/print" required>
      <small class="text-muted">Path relativo (es: /api/jobs/print). La URL base viene da SWITCH_WEBHOOK_BASE_URL</small>
    </div>

    <div class="mb-3">
      <label for="notes" class="form-label">Note</label>
      <textarea class="form-control" id="notes" name="notes" rows="2"><%= @flow&.notes %></textarea>
    </div>

    <div class="mb-3">
      <div class="form-check">
        <input type="checkbox" class="form-check-input" id="active" name="active" value="true" <%= @flow&.active? ? 'checked' : '' %>>
        <label class="form-check-label" for="active">Attivo</label>
      </div>
    </div>

    <div class="d-flex gap-2">
      <button type="submit" class="btn btn-primary">ðŸ’¾ Salva Flusso</button>
      <a href="/print_flows" class="btn btn-secondary">Annulla</a>
    </div>
  </form>
</div>
