NoMethodError at /admin/cleanup/preview
undefined method `link_to' for #<PrintOrchestrator:0x00007d9f68727088 @default_layout=:layout, @preferred_extension="erb", @app=nil, @template_cache=#<Sinatra::TemplateCache:0x00007d9f66f429b8 @cache={[:erb, :admin_cleanup, {:outvar=>"@_out_buf", :default_encoding=>"utf-8"}, "/home/paolo/apps/print-orchestrator/views"]=>#<Tilt::ERBTemplate:0x00007d9f6918a660 @options={:outvar=>"@_out_buf"}, @line=1, @file="/home/paolo/apps/print-orchestrator/views/admin_cleanup.erb", @scope_class=nil, @default_encoding="utf-8", @skip_compiled_encoding_detection=nil, @data="<div class=\"mb-4\">\n <nav aria-label=\"breadcrumb\">\n <ol class=\"breadcrumb\">\n <li class=\"breadcrumb-item\"><a href=\"/orders\">Orders</a></li>\n <li class=\"breadcrumb-item active\">Admin</li>\n <li class=\"breadcrumb-item active\">Pulizia File</li>\n </ol>\n </nav>\n</div>\n\n<div class=\"row mb-4\">\n <div class=\"col-md-8\">\n <h1>üßπ Pulizia File di Stampa</h1>\n </div>\n</div>\n\n<% if params[:msg] %>\n <div class=\"alert alert-<%= params[:msg] == 'success' ? 'success' : 'danger' %> alert-dismissible fade show\" role=\"alert\">\n <%= params[:text]&.gsub('+', ' ') %>\n <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n </div>\n<% end %>\n\n<div class=\"row\">\n <!-- Statistiche -->\n <div class=\"col-md-6 mb-4\">\n <div class=\"card\">\n <div class=\"card-header\">\n <strong>üìä Statistiche Storage</strong>\n </div>\n <div class=\"card-body\">\n <table class=\"table table-sm table-borderless\">\n <tr>\n <th>File totali importati:</th>\n <td><strong><%= @total_assets %></strong></td>\n </tr>\n <tr>\n <th>File scaricati:</th>\n <td><strong><%= @downloaded_assets %></strong></td>\n </tr>\n <tr>\n <th>File cancellati:</th>\n <td><strong><%= @deleted_assets %></strong></td>\n </tr>\n <tr>\n <th>Spazio disco usato:</th>\n <td><strong><%= @disk_usage %></strong></td>\n </tr>\n <tr>\n <th>Giorni conservazione (default):</th>\n <td><strong><%= @retention_days %></strong></td>\n </tr>\n </table>\n </div>\n </div>\n </div>\n\n <!-- Pulizia Automatica -->\n <div class=\"col-md-6 mb-4\">\n <div class=\"card\">\n <div class=\"card-header\">\n <strong>‚è∞ Pulizia Automatica</strong>\n </div>\n <div class=\"card-body\">\n <p class=\"text-muted\">File cancellati automaticamente ogni notte dopo <%= @retention_days %> giorni.</p>\n <form action=\"/admin/cleanup/auto\" method=\"post\">\n <button type=\"submit\" class=\"btn btn-primary w-100\" onclick=\"return confirm('Esegui pulizia automatica ORA (file > <%= @retention_days %> giorni)?')\">\n ‚ñ∂Ô∏è Esegui Pulizia ORA\n </button>\n </form>\n <small class=\"text-muted d-block mt-2\">\n Ultima esecuzione: <strong><%= @last_cleanup_time || 'Mai' %></strong>\n </small>\n </div>\n </div>\n </div>\n</div>\n\n<!-- Pulizia Manuale per Mese -->\n<div class=\"card mb-4\">\n <div class=\"card-header\">\n <strong>üìÖ Pulizia Manuale per Mese</strong>\n </div>\n <div class=\"card-body\">\n <p class=\"text-muted mb-3\">Seleziona un mese per visualizzare i file e decidere se eliminarli.</p>\n \n <form method=\"get\" action=\"/admin/cleanup/preview\" class=\"row g-3 mb-3\">\n <div class=\"col-md-3\">\n <label for=\"cleanup_year\" class=\"form-label\">Anno</label>\n <input type=\"number\" class=\"form-control\" id=\"cleanup_year\" name=\"year\" \n min=\"2020\" max=\"<%= Date.today.year %>\" value=\"<%= params[:year] || Date.today.year %>\">\n </div>\n <div class=\"col-md-3\">\n <label for=\"cleanup_month\" class=\"form-label\">Mese</label>\n <select class=\"form-select\" id=\"cleanup_month\" name=\"month\">\n <option value=\"\">-- Seleziona mese --</option>\n <% 12.times do |i| %>\n <option value=\"<%= i + 1 %>\" <%= 'selected' if params[:month]&.to_i == (i + 1) %>>\n <%= Date.new(2020, i + 1, 1).strftime('%B') %>\n </option>\n <% end %>\n </select>\n </div>\n <div class=\"col-md-6\">\n <label class=\"form-label\">&nbsp;</label>\n <button type=\"submit\" class=\"btn btn-outline-primary w-100\">üîç Anteprima</button>\n </div>\n </form>\n\n <% if params[:month].present? && params[:year].present? %>\n <hr>\n <h6><%= Date.new(params[:year].to_i, params[:month].to_i, 1).strftime('%B %Y') %></h6>\n \n <% if @preview_assets.count > 0 %>\n <div class=\"alert alert-warning\">\n ‚ö†Ô∏è Trovati <strong><%= @preview_assets.count %></strong> file da eliminare\n (<strong><%= @preview_space %></strong> di spazio liberato)\n </div>\n\n <div class=\"table-responsive\">\n <table class=\"table table-sm table-hover\">\n <thead class=\"table-light\">\n <tr>\n <th>Data Import</th>\n <th>Store</th>\n <th>Order</th>\n <th>SKU</th>\n <th>File</th>\n <th>Dimensione</th>\n </tr>\n </thead>\n <tbody>\n <% @preview_assets.each do |asset| %>\n <tr>\n <td><small><%= asset.imported_at.strftime('%d-%m-%y %H:%M') %></small></td>\n <td><%= asset.order_item.order.store.code %></td>\n <td><%= link_to asset.order_item.order.external_order_code, \"/orders/\#{asset.order_item.order.id}\" %></td>\n <td><%= asset.order_item.sku %></td>\n <td><code><small><%= asset.filename_from_url %></small></code></td>\n <td>\n <% if asset.downloaded? && File.exist?(asset.local_path_full) %>\n <small><%= format_file_size(File.size(asset.local_path_full)) %></small>\n <% else %>\n <small class=\"text-muted\">N/A</small>\n <% end %>\n </td>\n </tr>\n <% end %>\n </tbody>\n </table>\n </div>\n\n <form action=\"/admin/cleanup/delete_month\" method=\"post\" onsubmit=\"return confirm('Eliminare <%= @preview_assets.count %> file di <%= Date.new(params[:year].to_i, params[:month].to_i, 1).strftime('%B %Y') %>? Questa azione √® irreversibile!');\">\n <input type=\"hidden\" name=\"year\" value=\"<%= params[:year] %>\">\n <input type=\"hidden\" name=\"month\" value=\"<%= params[:month] %>\">\n <button type=\"submit\" class=\"btn btn-danger\">\n üóëÔ∏è Elimina <%= @preview_assets.count %> File\n </button>\n <a href=\"/admin/cleanup\" class=\"btn btn-secondary\">Annulla</a>\n </form>\n <% elsif params[:month].present? %>\n <div class=\"alert alert-info\">‚ÑπÔ∏è Nessun file trovato per questo mese</div>\n <% end %>\n <% end %>\n </div>\n</div>\n\n<style>\n .table-hover tbody tr:hover {\n background-color: #f5f5f5;\n }\n</style>\n\n<script>\n function format_file_size(bytes) {\n if (bytes === 0) return '0 B';\n const k = 1024;\n const sizes = ['B', 'KB', 'MB', 'GB'];\n const i = Math.floor(Math.log(bytes) / Math.log(k));\n return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\n }\n</script>\n", @fixed_locals=nil, @freeze_string_literals=false, @outvar="@_out_buf", @engine=#<ERB:0x00007d9f691893f0 @src="#coding:UTF-8\n@_out_buf = +''; @_out_buf.<< \"<div class=\\\"mb-4\\\">\\n\".freeze\n; @_out_buf.<< \" <nav aria-label=\\\"breadcrumb\\\">\\n\".freeze\n; @_out_buf.<< \" <ol class=\\\"breadcrumb\\\">\\n\".freeze\n; @_out_buf.<< \" <li class=\\\"breadcrumb-item\\\"><a href=\\\"/orders\\\">Orders</a></li>\\n\".freeze\n; @_out_buf.<< \" <li class=\\\"breadcrumb-item active\\\">Admin</li>\\n\".freeze\n; @_out_buf.<< \" <li class=\\\"breadcrumb-item active\\\">Pulizia File</li>\\n\".freeze\n; @_out_buf.<< \" </ol>\\n\".freeze\n; @_out_buf.<< \" </nav>\\n\".freeze\n; @_out_buf.<< \"</div>\\n\".freeze\n; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"<div class=\\\"row mb-4\\\">\\n\".freeze\n; @_out_buf.<< \" <div class=\\\"col-md-8\\\">\\n\".freeze\n; @_out_buf.<< \" <h1>\\xF0\\x9F\\xA7\\xB9 Pulizia File di Stampa</h1>\\n\".freeze\n; @_out_buf.<< \" </div>\\n\".freeze\n; @_out_buf.<< \"</div>\\n\".freeze\n; @_out_buf.<< \"\\n\".freeze\n; if params[:msg] \n@_out_buf.<< \" <div class=\\\"alert alert-\".freeze; @_out_buf.<<(( params[:msg] == 'success' ? 'success' : 'danger' ).to_s); @_out_buf.<< \" alert-dismissible fade show\\\" role=\\\"alert\\\">\\n\".freeze\n; @_out_buf.<< \" \".freeze; @_out_buf.<<(( params[:text]&.gsub('+', ' ') ).to_s); @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \" <button type=\\\"button\\\" class=\\\"btn-close\\\" data-bs-dismiss=\\\"alert\\\"></button>\\n\".freeze\n; @_out_buf.<< \" </div>\\n\".freeze\n; end \n@_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"<div class=\\\"row\\\">\\n\".freeze\n; @_out_buf.<< \" <!-- Statistiche -->\\n\".freeze\n; @_out_buf.<< \" <div class=\\\"col-md-6 mb-4\\\">\\n\".freeze\n; @_out_buf.<< \" <div class=\\\"card\\\">\\n\".freeze\n; @_out_buf.<< \" <div class=\\\"card-header\\\">\\n\".freeze\n; @_out_buf.<< \" <strong>\\xF0\\x9F\\x93\\x8A Statistiche Storage</strong>\\n\".freeze\n; @_out_buf.<< \" </div>\\n\".freeze\n; @_out_buf.<< \" <div class=\\\"card-body\\\">\\n\".freeze\n; @_out_buf.<< \" <table class=\\\"table table-sm table-borderless\\\">\\n\".freeze\n; @_out_buf.<< \" <tr>\\n\".freeze\n; @_out_buf.<< \" <th>File totali importati:</th>\\n\".freeze\n; @_out_buf.<< \" <td><strong>\".freeze; @_out_buf.<<(( @total_assets ).to_s); @_out_buf.<< \"</strong></td>\\n\".freeze\n; @_out_buf.<< \" </tr>\\n\".freeze\n; @_out_buf.<< \" <tr>\\n\".freeze\n; @_out_buf.<< \" <th>File scaricati:</th>\\n\".freeze\n; @_out_buf.<< \" <td><strong>\".freeze; @_out_buf.<<(( @downloaded_assets ).to_s); @_out_buf.<< \"</strong></td>\\n\".freeze\n; @_out_buf.<< \" </tr>\\n\".freeze\n; @_out_buf.<< \" <tr>\\n\".freeze\n; @_out_buf.<< \" <th>File cancellati:</th>\\n\".freeze\n; @_out_buf.<< \" <td><strong>\".freeze; @_out_buf.<<(( @deleted_assets ).to_s); @_out_buf.<< \"</strong></td>\\n\".freeze\n; @_out_buf.<< \" </tr>\\n\".freeze\n; @_out_buf.<< \" <tr>\\n\".freeze\n; @_out_buf.<< \" <th>Spazio disco usato:</th>\\n\".freeze\n; @_out_buf.<< \" <td><strong>\".freeze; @_out_buf.<<(( @disk_usage ).to_s); @_out_buf.<< \"</strong></td>\\n\".freeze\n; @_out_buf.<< \" </tr>\\n\".freeze\n; @_out_buf.<< \" <tr>\\n\".freeze\n; @_out_buf.<< \" <th>Giorni conservazione (default):</th>\\n\".freeze\n; @_out_buf.<< \" <td><strong>\".freeze; @_out_buf.<<(( @retention_days ).to_s); @_out_buf.<< \"</strong></td>\\n\".freeze\n; @_out_buf.<< \" </tr>\\n\".freeze\n; @_out_buf.<< \" </table>\\n\".freeze\n; @_out_buf.<< \" </div>\\n\".freeze\n; @_out_buf.<< \" </div>\\n\".freeze\n; @_out_buf.<< \" </div>\\n\".freeze\n; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \" <!-- Pulizia Automatica -->\\n\".freeze\n; @_out_buf.<< \" <div class=\\\"col-md-6 mb-4\\\">\\n\".freeze\n; @_out_buf.<< \" <div class=\\\"card\\\">\\n\".freeze\n; @_out_buf.<< \" <div class=\\\"card-header\\\">\\n\".freeze\n; @_out_buf.<< \" <strong>\\xE2\\x8F\\xB0 Pulizia Automatica</strong>\\n\".freeze\n; @_out_buf.<< \" </div>\\n\".freeze\n; @_out_buf.<< \" <div class=\\\"card-body\\\">\\n\".freeze\n; @_out_buf.<< \" <p class=\\\"text-muted\\\">File cancellati automaticamente ogni notte dopo \".freeze; @_out_buf.<<(( @retention_days ).to_s); @_out_buf.<< \" giorni.</p>\\n\".freeze\n; @_out_buf.<< \" <form action=\\\"/admin/cleanup/auto\\\" method=\\\"post\\\">\\n\".freeze\n; @_out_buf.<< \" <button type=\\\"submit\\\" class=\\\"btn btn-primary w-100\\\" onclick=\\\"return confirm('Esegui pulizia automatica ORA (file > \".freeze; @_out_buf.<<(( @retention_days ).to_s); @_out_buf.<< \" giorni)?')\\\">\\n\".freeze\n; @_out_buf.<< \" \\xE2\\x96\\xB6\\xEF\\xB8\\x8F Esegui Pulizia ORA\\n\".freeze\n; @_out_buf.<< \" </button>\\n\".freeze\n; @_out_buf.<< \" </form>\\n\".freeze\n; @_out_buf.<< \" <small class=\\\"text-muted d-block mt-2\\\">\\n\".freeze\n; @_out_buf.<< \" Ultima esecuzione: <strong>\".freeze; @_out_buf.<<(( @last_cleanup_time || 'Mai' ).to_s); @_out_buf.<< \"</strong>\\n\".freeze\n; @_out_buf.<< \" </small>\\n\".freeze\n; @_out_buf.<< \" </div>\\n\".freeze\n; @_out_buf.<< \" </div>\\n\".freeze\n; @_out_buf.<< \" </div>\\n\".freeze\n; @_out_buf.<< \"</div>\\n\".freeze\n; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"<!-- Pulizia Manuale per Mese -->\\n\".freeze\n; @_out_buf.<< \"<div class=\\\"card mb-4\\\">\\n\".freeze\n; @_out_buf.<< \" <div class=\\\"card-header\\\">\\n\".freeze\n; @_out_buf.<< \" <strong>\\xF0\\x9F\\x93\\x85 Pulizia Manuale per Mese</strong>\\n\".freeze\n; @_out_buf.<< \" </div>\\n\".freeze\n; @_out_buf.<< \" <div class=\\\"card-body\\\">\\n\".freeze\n; @_out_buf.<< \" <p class=\\\"text-muted mb-3\\\">Seleziona un mese per visualizzare i file e decidere se eliminarli.</p>\\n\".freeze\n; @_out_buf.<< \" \\n\".freeze\n; @_out_buf.<< \" <form method=\\\"get\\\" action=\\\"/admin/cleanup/preview\\\" class=\\\"row g-3 mb-3\\\">\\n\".freeze\n; @_out_buf.<< \" <div class=\\\"col-md-3\\\">\\n\".freeze\n; @_out_buf.<< \" <label for=\\\"cleanup_year\\\" class=\\\"form-label\\\">Anno</label>\\n\".freeze\n; @_out_buf.<< \" <input type=\\\"number\\\" class=\\\"form-control\\\" id=\\\"cleanup_year\\\" name=\\\"year\\\" \\n\".freeze\n; @_out_buf.<< \" min=\\\"2020\\\" max=\\\"\".freeze; @_out_buf.<<(( Date.today.year ).to_s); @_out_buf.<< \"\\\" value=\\\"\".freeze; @_out_buf.<<(( params[:year] || Date.today.year ).to_s); @_out_buf.<< \"\\\">\\n\".freeze\n; @_out_buf.<< \" </div>\\n\".freeze\n; @_out_buf.<< \" <div class=\\\"col-md-3\\\">\\n\".freeze\n; @_out_buf.<< \" <label for=\\\"cleanup_month\\\" class=\\\"form-label\\\">Mese</label>\\n\".freeze\n; @_out_buf.<< \" <select class=\\\"form-select\\\" id=\\\"cleanup_month\\\" name=\\\"month\\\">\\n\".freeze\n; @_out_buf.<< \" <option value=\\\"\\\">-- Seleziona mese --</option>\\n\".freeze\n; @_out_buf.<< \" \".freeze; 12.times do |i| ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \" <option value=\\\"\".freeze; @_out_buf.<<(( i + 1 ).to_s); @_out_buf.<< \"\\\" \".freeze; @_out_buf.<<(( 'selected' if params[:month]&.to_i == (i + 1) ).to_s); @_out_buf.<< \">\\n\".freeze\n; @_out_buf.<< \" \".freeze; @_out_buf.<<(( Date.new(2020, i + 1, 1).strftime('%B') ).to_s); @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \" </option>\\n\".freeze\n; @_out_buf.<< \" \".freeze; end ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \" </select>\\n\".freeze\n; @_out_buf.<< \" </div>\\n\".freeze\n; @_out_buf.<< \" <div class=\\\"col-md-6\\\">\\n\".freeze\n; @_out_buf.<< \" <label class=\\\"form-label\\\">&nbsp;</label>\\n\".freeze\n; @_out_buf.<< \" <button type=\\\"submit\\\" class=\\\"btn btn-outline-primary w-100\\\">\\xF0\\x9F\\x94\\x8D Anteprima</button>\\n\".freeze\n; @_out_buf.<< \" </div>\\n\".freeze\n; @_out_buf.<< \" </form>\\n\".freeze\n; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \" \".freeze; if params[:month].present? && params[:year].present? ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \" <hr>\\n\".freeze\n; @_out_buf.<< \" <h6>\".freeze; @_out_buf.<<(( Date.new(params[:year].to_i, params[:month].to_i, 1).strftime('%B %Y') ).to_s); @_out_buf.<< \"</h6>\\n\".freeze\n; @_out_buf.<< \" \\n\".freeze\n; @_out_buf.<< \" \".freeze; if @preview_assets.count > 0 ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \" <div class=\\\"alert alert-warning\\\">\\n\".freeze\n; @_out_buf.<< \" \\xE2\\x9A\\xA0\\xEF\\xB8\\x8F Trovati <strong>\".freeze; @_out_buf.<<(( @preview_assets.count ).to_s); @_out_buf.<< \"</strong> file da eliminare\\n\".freeze\n; @_out_buf.<< \" (<strong>\".freeze; @_out_buf.<<(( @preview_space ).to_s); @_out_buf.<< \"</strong> di spazio liberato)\\n\".freeze\n; @_out_buf.<< \" </div>\\n\".freeze\n; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \" <div class=\\\"table-responsive\\\">\\n\".freeze\n; @_out_buf.<< \" <table class=\\\"table table-sm table-hover\\\">\\n\".freeze\n; @_out_buf.<< \" <thead class=\\\"table-light\\\">\\n\".freeze\n; @_out_buf.<< \" <tr>\\n\".freeze\n; @_out_buf.<< \" <th>Data Import</th>\\n\".freeze\n; @_out_buf.<< \" <th>Store</th>\\n\".freeze\n; @_out_buf.<< \" <th>Order</th>\\n\".freeze\n; @_out_buf.<< \" <th>SKU</th>\\n\".freeze\n; @_out_buf.<< \" <th>File</th>\\n\".freeze\n; @_out_buf.<< \" <th>Dimensione</th>\\n\".freeze\n; @_out_buf.<< \" </tr>\\n\".freeze\n; @_out_buf.<< \" </thead>\\n\".freeze\n; @_out_buf.<< \" <tbody>\\n\".freeze\n; @_out_buf.<< \" \".freeze; @preview_assets.each do |asset| ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \" <tr>\\n\".freeze\n; @_out_buf.<< \" <td><small>\".freeze; @_out_buf.<<(( asset.imported_at.strftime('%d-%m-%y %H:%M') ).to_s); @_out_buf.<< \"</small></td>\\n\".freeze\n; @_out_buf.<< \" <td>\".freeze; @_out_buf.<<(( asset.order_item.order.store.code ).to_s); @_out_buf.<< \"</td>\\n\".freeze\n; @_out_buf.<< \" <td>\".freeze; @_out_buf.<<(( link_to asset.order_item.order.external_order_code, \"/orders/\#{asset.order_item.order.id}\" ).to_s); @_out_buf.<< \"</td>\\n\".freeze\n; @_out_buf.<< \" <td>\".freeze; @_out_buf.<<(( asset.order_item.sku ).to_s); @_out_buf.<< \"</td>\\n\".freeze\n; @_out_buf.<< \" <td><code><small>\".freeze; @_out_buf.<<(( asset.filename_from_url ).to_s); @_out_buf.<< \"</small></code></td>\\n\".freeze\n; @_out_buf.<< \" <td>\\n\".freeze\n; @_out_buf.<< \" \".freeze; if asset.downloaded? && File.exist?(asset.local_path_full) ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \" <small>\".freeze; @_out_buf.<<(( format_file_size(File.size(asset.local_path_full)) ).to_s); @_out_buf.<< \"</small>\\n\".freeze\n; @_out_buf.<< \" \".freeze; else ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \" <small class=\\\"text-muted\\\">N/A</small>\\n\".freeze\n; @_out_buf.<< \" \".freeze; end ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \" </td>\\n\".freeze\n; @_out_buf.<< \" </tr>\\n\".freeze\n; @_out_buf.<< \" \".freeze; end ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \" </tbody>\\n\".freeze\n; @_out_buf.<< \" </table>\\n\".freeze\n; @_out_buf.<< \" </div>\\n\".freeze\n; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \" <form action=\\\"/admin/cleanup/delete_month\\\" method=\\\"post\\\" onsubmit=\\\"return confirm('Eliminare \".freeze; @_out_buf.<<(( @preview_assets.count ).to_s); @_out_buf.<< \" file di \".freeze; @_out_buf.<<(( Date.new(params[:year].to_i, params[:month].to_i, 1).strftime('%B %Y') ).to_s); @_out_buf.<< \"? Questa azione \\xC3\\xA8 irreversibile!');\\\">\\n\".freeze\n; @_out_buf.<< \" <input type=\\\"hidden\\\" name=\\\"year\\\" value=\\\"\".freeze; @_out_buf.<<(( params[:year] ).to_s); @_out_buf.<< \"\\\">\\n\".freeze\n; @_out_buf.<< \" <input type=\\\"hidden\\\" name=\\\"month\\\" value=\\\"\".freeze; @_out_buf.<<(( params[:month] ).to_s); @_out_buf.<< \"\\\">\\n\".freeze\n; @_out_buf.<< \" <button type=\\\"submit\\\" class=\\\"btn btn-danger\\\">\\n\".freeze\n; @_out_buf.<< \" \\xF0\\x9F\\x97\\x91\\xEF\\xB8\\x8F Elimina \".freeze; @_out_buf.<<(( @preview_assets.count ).to_s); @_out_buf.<< \" File\\n\".freeze\n; @_out_buf.<< \" </button>\\n\".freeze\n; @_out_buf.<< \" <a href=\\\"/admin/cleanup\\\" class=\\\"btn btn-secondary\\\">Annulla</a>\\n\".freeze\n; @_out_buf.<< \" </form>\\n\".freeze\n; @_out_buf.<< \" \".freeze; elsif params[:month].present? ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \" <div class=\\\"alert alert-info\\\">\\xE2\\x84\\xB9\\xEF\\xB8\\x8F Nessun file trovato per questo mese</div>\\n\".freeze\n; @_out_buf.<< \" \".freeze; end ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \" \".freeze; end ; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \" </div>\\n\".freeze\n; @_out_buf.<< \"</div>\\n\".freeze\n; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"<style>\\n\".freeze\n; @_out_buf.<< \" .table-hover tbody tr:hover {\\n\".freeze\n; @_out_buf.<< \" background-color: #f5f5f5;\\n\".freeze\n; @_out_buf.<< \" }\\n\".freeze\n; @_out_buf.<< \"</style>\\n\".freeze\n; @_out_buf.<< \"\\n\".freeze\n; @_out_buf.<< \"<script>\\n\".freeze\n; @_out_buf.<< \" function format_file_size(bytes) {\\n\".freeze\n; @_out_buf.<< \" if (bytes === 0) return '0 B';\\n\".freeze\n; @_out_buf.<< \" const k = 1024;\\n\".freeze\n; @_out_buf.<< \" const sizes = ['B', 'KB', 'MB', 'GB'];\\n\".freeze\n; @_out_buf.<< \" const i = Math.floor(Math.log(bytes) / Math.log(k));\\n\".freeze\n; @_out_buf.<< \" return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\\n\".freeze\n; @_out_buf.<< \" }\\n\".freeze\n; @_out_buf.<< \"</script>\\n\".freeze\n; @_out_buf", @encoding=#<Encoding:UTF-8>, @frozen_string=nil, @filename=nil, @lineno=0, @_init=#<Class:ERB>>, @compiled_method={[PrintOrchestrator, []]=>#<UnboundMethod: Tilt::CompiledTemplates#__tilt_4600(locals) /home/paolo/apps/print-orchestrator/views/admin_cleanup.erb:-6>}>}>, @pinned_response=false, @env={"rack.version"=>[1, 6], "rack.errors"=>#<Object:0x00007d9f6d9dbec8>, "rack.multithread"=>true, "rack.multiprocess"=>false, "rack.run_once"=>false, "rack.url_scheme"=>"http", "SCRIPT_NAME"=>"", "QUERY_STRING"=>"year=2025&month=11", "SERVER_SOFTWARE"=>"puma 6.6.1 Return to Forever", "GATEWAY_INTERFACE"=>"CGI/1.2", "REQUEST_METHOD"=>"GET", "REQUEST_PATH"=>"/admin/cleanup/preview", "REQUEST_URI"=>"/admin/cleanup/preview?year=2025&month=11", "SERVER_PROTOCOL"=>"HTTP/1.1", "HTTP_HOST"=>"192.168.1.55:5000", "HTTP_CONNECTION"=>"keep-alive", "HTTP_UPGRADE_INSECURE_REQUESTS"=>"1", "HTTP_USER_AGENT"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36", "HTTP_ACCEPT"=>"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7", "HTTP_REFERER"=>"http://192.168.1.55:5000/admin/cleanup/preview?year=2025&month=6", "HTTP_ACCEPT_ENCODING"=>"gzip, deflate", "HTTP_ACCEPT_LANGUAGE"=>"it-IT,it;q=0.9,en-US;q=0.8,en;q=0.7,nl;q=0.6,fr;q=0.5,de;q=0.4", "puma.request_body_wait"=>0.036447999998927116, "SERVER_NAME"=>"192.168.1.55", "SERVER_PORT"=>"5000", "PATH_INFO"=>"/admin/cleanup/preview", "REMOTE_ADDR"=>"192.168.1.85", "HTTP_VERSION"=>"HTTP/1.1", "puma.socket"=>#<TCPSocket:fd 12, AF_INET, 192.168.1.55, 5000>, "rack.hijack?"=>true, "rack.hijack"=>#<Puma::Client:0x1590 @ready=true>, "rack.input"=>#<Puma::NullIO:0x00007d9f68f8a6d0>, "rack.after_reply"=>[], "puma.config"=>#<Puma::Configuration:0x00007d9f6d952308 @options=#<Puma::UserFileDefaultOptions:0x00007d9f68f38970 @user_options={:log_writer=>#<Puma::LogWriter:0x00007d9f6d952358 @formatter=#<Puma::LogWriter::DefaultFormatter:0x00007d9f68f39000>, @custom_logger=nil, @stdout=#<IO:<STDOUT>>, @stderr=#<IO:<STDERR>>, @debug=false, @error_logger=#<Puma::ErrorLogger:0x00007d9f68f38fb0 @ioerr=#<IO:<STDERR>>, @debug=false>>, :environment=>"development"}, @file_options={:min_threads=>5, :max_threads=>5, :binds=>["tcp://0.0.0.0:5000"], :environment=>"development"}, @default_options={:auto_trim_time=>30, :binds=>["tcp://0.0.0.0:9292"], :clean_thread_locals=>false, :debug=>false, :enable_keep_alives=>true, :early_hints=>nil, :environment=>"development", :first_data_timeout=>30, :idle_timeout=>nil, :io_selector_backend=>:auto, :log_requests=>false, :logger=>#<IO:<STDOUT>>, :max_fast_inline=>10, :max_threads=>5, :min_threads=>0, :mode=>:http, :mutate_stdout_and_stderr_to_sync_on_write=>true, :out_of_band=>[], :persistent_timeout=>20, :queue_requests=>true, :rackup=>"config.ru", :raise_exception_on_sigterm=>true, :reaping_time=>1, :remote_address=>:socket, :silence_single_worker_warning=>false, :silence_fork_callback_warning=>false, :tag=>"print-orchestrator", :tcp_host=>"0.0.0.0", :tcp_port=>9292, :wait_for_less_busy_worker=>0.005, :worker_boot_timeout=>60, :worker_check_interval=>5, :worker_culling_strategy=>:youngest, :worker_shutdown_timeout=>30, :worker_timeout=>60, :workers=>0, :http_content_length_limit=>nil, :events=>#<Puma::Events:0x00007d9f68f38f38 @hooks={:state=>[], :on_booted=>[]}>, :preload_app=>false}>, @plugins=#<Puma::PluginLoader:0x00007d9f68f38808 @instances=[]>, @user_dsl=#<Puma::DSL:0x00007d9f68f38678 @config=#<Puma::Configuration:0x00007d9f6d952308 ...>, @options={:log_writer=>#<Puma::LogWriter:0x00007d9f6d952358 @formatter=#<Puma::LogWriter::DefaultFormatter:0x00007d9f68f39000>, @custom_logger=nil, @stdout=#<IO:<STDOUT>>, @stderr=#<IO:<STDERR>>, @debug=false, @error_logger=#<Puma::ErrorLogger:0x00007d9f68f38fb0 @ioerr=#<IO:<STDERR>>, @debug=false>>, :environment=>"development"}, @plugins=[]>, @file_dsl=#<Puma::DSL:0x00007d9f68f385b0 @config=#<Puma::Configuration:0x00007d9f6d952308 ...>, @options={:min_threads=>5, :max_threads=>5, :binds=>["tcp://0.0.0.0:5000"], :environment=>"development"}, @plugins=[], @path="config/puma.rb">, @default_dsl=#<Puma::DSL:0x00007d9f68f38470 @config=#<Puma::Configuration:0x00007d9f6d952308 ...>, @options={:auto_trim_time=>30, :binds=>["tcp://0.0.0.0:9292"], :clean_thread_locals=>false, :debug=>false, :enable_keep_alives=>true, :early_hints=>nil, :environment=>"development", :first_data_timeout=>30, :idle_timeout=>nil, :io_selector_backend=>:auto, :log_requests=>false, :logger=>#<IO:<STDOUT>>, :max_fast_inline=>10, :max_threads=>5, :min_threads=>0, :mode=>:http, :mutate_stdout_and_stderr_to_sync_on_write=>true, :out_of_band=>[], :persistent_timeout=>20, :queue_requests=>true, :rackup=>"config.ru", :raise_exception_on_sigterm=>true, :reaping_time=>1, :remote_address=>:socket, :silence_single_worker_warning=>false, :silence_fork_callback_warning=>false, :tag=>"print-orchestrator", :tcp_host=>"0.0.0.0", :tcp_port=>9292, :wait_for_less_busy_worker=>0.005, :worker_boot_timeout=>60, :worker_check_interval=>5, :worker_culling_strategy=>:youngest, :worker_shutdown_timeout=>30, :worker_timeout=>60, :workers=>0, :http_content_length_limit=>nil, :events=>#<Puma::Events:0x00007d9f68f38f38 @hooks={:state=>[], :on_booted=>[]}>, :preload_app=>false}, @plugins=[]>, @puma_bundler_pruned=false>, "rack.logger"=>#<Logger:0x00007d9f68729658 @level=4, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007d9f68d61908 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007d9f690d7da8 @shift_period_suffix=nil, @shift_size=nil, @shift_age=nil, @filename=nil, @dev=#<IO:<STDERR>>, @binmode=false, @reraise_write_errors=[], @skip_header=false, @mon_data=#<Monitor:0x00007d9f68d617f0>, @mon_data_owner_object_id=4180>, @level_override={}>, "rack.request.query_hash"=>{"year"=>"2025", "month"=>"11"}, "rack.request.form_pairs"=>[], "rack.request.form_hash"=>{}, "sinatra.route"=>"GET /admin/cleanup/preview", "sinatra.error.params"=>{"year"=>"2025", "month"=>"11"}, "sinatra.error"=>#<NoMethodError: undefined method `link_to' for #<PrintOrchestrator:0x00007d9f68727088 ...>>, "sinatra.accept"=>[#<Sinatra::Request::AcceptEntry:0x00007d9f65eda738 @entry="text/html", @type="text/html", @params={}, @q=1.0>, #<Sinatra::Request::AcceptEntry:0x00007d9f65eda6e8 @entry="application/xhtml+xml", @type="application/xhtml+xml", @params={}, @q=1.0>, #<Sinatra::Request::AcceptEntry:0x00007d9f65eda558 @entry="image/avif", @type="image/avif", @params={}, @q=1.0>, #<Sinatra::Request::AcceptEntry:0x00007d9f65eda508 @entry="image/webp", @type="image/webp", @params={}, @q=1.0>, #<Sinatra::Request::AcceptEntry:0x00007d9f65eda4b8 @entry="image/apng", @type="image/apng", @params={}, @q=1.0>, #<Sinatra::Request::AcceptEntry:0x00007d9f65eda648 @entry="application/xml;q=0.9", @type="application/xml", @params={}, @q=0.9>, #<Sinatra::Request::AcceptEntry:0x00007d9f65eda468 @entry="*/*;q=0.8", @type="*/*", @params={}, @q=0.8>, #<Sinatra::Request::AcceptEntry:0x00007d9f65eda418 @entry="application/signed-exchange;v=b3;q=0.7", @type="application/signed-exchange", @params={"v"=>"b3"}, @q=0.7>]}, @params={"year"=>"2025", "month"=>"11"}, @request=#<Sinatra::Request:0x00007d9f68dbbc00 @env={"rack.version"=>[1, 6], "rack.errors"=>#<Object:0x00007d9f6d9dbec8>, "rack.multithread"=>true, "rack.multiprocess"=>false, "rack.run_once"=>false, "rack.url_scheme"=>"http", "SCRIPT_NAME"=>"", "QUERY_STRING"=>"year=2025&month=11", "SERVER_SOFTWARE"=>"puma 6.6.1 Return to Forever", "GATEWAY_INTERFACE"=>"CGI/1.2", "REQUEST_METHOD"=>"GET", "REQUEST_PATH"=>"/admin/cleanup/preview", "REQUEST_URI"=>"/admin/cleanup/preview?year=2025&month=11", "SERVER_PROTOCOL"=>"HTTP/1.1", "HTTP_HOST"=>"192.168.1.55:5000", "HTTP_CONNECTION"=>"keep-alive", "HTTP_UPGRADE_INSECURE_REQUESTS"=>"1", "HTTP_USER_AGENT"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36", "HTTP_ACCEPT"=>"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7", "HTTP_REFERER"=>"http://192.168.1.55:5000/admin/cleanup/preview?year=2025&month=6", "HTTP_ACCEPT_ENCODING"=>"gzip, deflate", "HTTP_ACCEPT_LANGUAGE"=>"it-IT,it;q=0.9,en-US;q=0.8,en;q=0.7,nl;q=0.6,fr;q=0.5,de;q=0.4", "puma.request_body_wait"=>0.036447999998927116, "SERVER_NAME"=>"192.168.1.55", "SERVER_PORT"=>"5000", "PATH_INFO"=>"/admin/cleanup/preview", "REMOTE_ADDR"=>"192.168.1.85", "HTTP_VERSION"=>"HTTP/1.1", "puma.socket"=>#<TCPSocket:fd 12, AF_INET, 192.168.1.55, 5000>, "rack.hijack?"=>true, "rack.hijack"=>#<Puma::Client:0x1590 @ready=true>, "rack.input"=>#<Puma::NullIO:0x00007d9f68f8a6d0>, "rack.after_reply"=>[], "puma.config"=>#<Puma::Configuration:0x00007d9f6d952308 @options=#<Puma::UserFileDefaultOptions:0x00007d9f68f38970 @user_options={:log_writer=>#<Puma::LogWriter:0x00007d9f6d952358 @formatter=#<Puma::LogWriter::DefaultFormatter:0x00007d9f68f39000>, @custom_logger=nil, @stdout=#<IO:<STDOUT>>, @stderr=#<IO:<STDERR>>, @debug=false, @error_logger=#<Puma::ErrorLogger:0x00007d9f68f38fb0 @ioerr=#<IO:<STDERR>>, @debug=false>>, :environment=>"development"}, @file_options={:min_threads=>5, :max_threads=>5, :binds=>["tcp://0.0.0.0:5000"], :environment=>"development"}, @default_options={:auto_trim_time=>30, :binds=>["tcp://0.0.0.0:9292"], :clean_thread_locals=>false, :debug=>false, :enable_keep_alives=>true, :early_hints=>nil, :environment=>"development", :first_data_timeout=>30, :idle_timeout=>nil, :io_selector_backend=>:auto, :log_requests=>false, :logger=>#<IO:<STDOUT>>, :max_fast_inline=>10, :max_threads=>5, :min_threads=>0, :mode=>:http, :mutate_stdout_and_stderr_to_sync_on_write=>true, :out_of_band=>[], :persistent_timeout=>20, :queue_requests=>true, :rackup=>"config.ru", :raise_exception_on_sigterm=>true, :reaping_time=>1, :remote_address=>:socket, :silence_single_worker_warning=>false, :silence_fork_callback_warning=>false, :tag=>"print-orchestrator", :tcp_host=>"0.0.0.0", :tcp_port=>9292, :wait_for_less_busy_worker=>0.005, :worker_boot_timeout=>60, :worker_check_interval=>5, :worker_culling_strategy=>:youngest, :worker_shutdown_timeout=>30, :worker_timeout=>60, :workers=>0, :http_content_length_limit=>nil, :events=>#<Puma::Events:0x00007d9f68f38f38 @hooks={:state=>[], :on_booted=>[]}>, :preload_app=>false}>, @plugins=#<Puma::PluginLoader:0x00007d9f68f38808 @instances=[]>, @user_dsl=#<Puma::DSL:0x00007d9f68f38678 @config=#<Puma::Configuration:0x00007d9f6d952308 ...>, @options={:log_writer=>#<Puma::LogWriter:0x00007d9f6d952358 @formatter=#<Puma::LogWriter::DefaultFormatter:0x00007d9f68f39000>, @custom_logger=nil, @stdout=#<IO:<STDOUT>>, @stderr=#<IO:<STDERR>>, @debug=false, @error_logger=#<Puma::ErrorLogger:0x00007d9f68f38fb0 @ioerr=#<IO:<STDERR>>, @debug=false>>, :environment=>"development"}, @plugins=[]>, @file_dsl=#<Puma::DSL:0x00007d9f68f385b0 @config=#<Puma::Configuration:0x00007d9f6d952308 ...>, @options={:min_threads=>5, :max_threads=>5, :binds=>["tcp://0.0.0.0:5000"], :environment=>"development"}, @plugins=[], @path="config/puma.rb">, @default_dsl=#<Puma::DSL:0x00007d9f68f38470 @config=#<Puma::Configuration:0x00007d9f6d952308 ...>, @options={:auto_trim_time=>30, :binds=>["tcp://0.0.0.0:9292"], :clean_thread_locals=>false, :debug=>false, :enable_keep_alives=>true, :early_hints=>nil, :environment=>"development", :first_data_timeout=>30, :idle_timeout=>nil, :io_selector_backend=>:auto, :log_requests=>false, :logger=>#<IO:<STDOUT>>, :max_fast_inline=>10, :max_threads=>5, :min_threads=>0, :mode=>:http, :mutate_stdout_and_stderr_to_sync_on_write=>true, :out_of_band=>[], :persistent_timeout=>20, :queue_requests=>true, :rackup=>"config.ru", :raise_exception_on_sigterm=>true, :reaping_time=>1, :remote_address=>:socket, :silence_single_worker_warning=>false, :silence_fork_callback_warning=>false, :tag=>"print-orchestrator", :tcp_host=>"0.0.0.0", :tcp_port=>9292, :wait_for_less_busy_worker=>0.005, :worker_boot_timeout=>60, :worker_check_interval=>5, :worker_culling_strategy=>:youngest, :worker_shutdown_timeout=>30, :worker_timeout=>60, :workers=>0, :http_content_length_limit=>nil, :events=>#<Puma::Events:0x00007d9f68f38f38 @hooks={:state=>[], :on_booted=>[]}>, :preload_app=>false}, @plugins=[]>, @puma_bundler_pruned=false>, "rack.logger"=>#<Logger:0x00007d9f68729658 @level=4, @progname=nil, @default_formatter=#<Logger::Formatter:0x00007d9f68d61908 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00007d9f690d7da8 @shift_period_suffix=nil, @shift_size=nil, @shift_age=nil, @filename=nil, @dev=#<IO:<STDERR>>, @binmode=false, @reraise_write_errors=[], @skip_header=false, @mon_data=#<Monitor:0x00007d9f68d617f0>, @mon_data_owner_object_id=4180>, @level_override={}>, "rack.request.query_hash"=>{"year"=>"2025", "month"=>"11"}, "rack.request.form_pairs"=>[], "rack.request.form_hash"=>{}, "sinatra.route"=>"GET /admin/cleanup/preview", "sinatra.error.params"=>{"year"=>"2025", "month"=>"11"}, "sinatra.error"=>#<NoMethodError: undefined method `link_to' for #<PrintOrchestrator:0x00007d9f68727088 ...>>, "sinatra.accept"=>[#<Sinatra::Request::AcceptEntry:0x00007d9f65eda738 @entry="text/html", @type="text/html", @params={}, @q=1.0>, #<Sinatra::Request::AcceptEntry:0x00007d9f65eda6e8 @entry="application/xhtml+xml", @type="application/xhtml+xml", @params={}, @q=1.0>, #<Sinatra::Request::AcceptEntry:0x00007d9f65eda558 @entry="image/avif", @type="image/avif", @params={}, @q=1.0>, #<Sinatra::Request::AcceptEntry:0x00007d9f65eda508 @entry="image/webp", @type="image/webp", @params={}, @q=1.0>, #<Sinatra::Request::AcceptEntry:0x00007d9f65eda4b8 @entry="image/apng", @type="image/apng", @params={}, @q=1.0>, #<Sinatra::Request::AcceptEntry:0x00007d9f65eda648 @entry="application/xml;q=0.9", @type="application/xml", @params={}, @q=0.9>, #<Sinatra::Request::AcceptEntry:0x00007d9f65eda468 @entry="*/*;q=0.8", @type="*/*", @params={}, @q=0.8>, #<Sinatra::Request::AcceptEntry:0x00007d9f65eda418 @entry="application/signed-exchange;v=b3;q=0.7", @type="application/signed-exchange", @params={"v"=>"b3"}, @q=0.7>]}, @ip=nil, @params={"year"=>"2025", "month"=>"11"}>, @response=#<Sinatra::Response:0x00007d9f68726fe8 @status=500, @headers={}, @writer=#<Method: Sinatra::Response(Rack::Response::Helpers)#append(chunk) /home/paolo/apps/print-orchestrator/vendor/bundle/ruby/3.2.0/gems/rack-3.2.4/lib/rack/response.rb:359>, @block=nil, @body=[], @buffered=true, @length=nil>, @total_assets=7, @downloaded_assets=7, @deleted_assets=0, @disk_usage="7.56 MB", @retention_days=30, @preview_assets=#<ActiveRecord::Relation [#<Asset id: 10, order_item_id: 7, original_url: "Gemini_Generated_Image_3cydd43cydd43cyd.png", local_path: "storage/TPH_EU/5678/TPH001-71/Gemini_Generated_Ima...", asset_type: "print", created_at: "2025-11-25 16:54:07.939074000 +0000", updated_at: "2025-11-25 16:54:07.939074000 +0000", imported_at: "2025-11-25 16:54:07.940800000 +0000", deleted_at: nil>, #<Asset id: 5, order_item_id: 4, original_url: "https://tph-order.s3.eu-west-3.amazonaws.com/wc-ai...", local_path: "storage/TPH_EU/EU12345/TPH001-71/screenshot_1_scre...", asset_type: "screenshot_1", created_at: "2025-11-25 13:02:29.454009000 +0000", updated_at: "2025-11-25 13:02:30.613797000 +0000", imported_at: "2025-11-25 16:53:07.697860000 +0000", deleted_at: nil>, #<Asset id: 6, order_item_id: 5, original_url: "https://tph-order.s3.eu-west-3.amazonaws.com/wc-ai...", local_path: "storage/TPH_EU/EU12345/TPH001-71/print_file_1_prin...", asset_type: "print_file_1", created_at: "2025-11-25 13:02:29.463043000 +0000", updated_at: "2025-11-25 13:02:31.228295000 +0000", imported_at: "2025-11-25 16:53:07.697860000 +0000", deleted_at: nil>, #<Asset id: 4, order_item_id: 4, original_url: "https://tph-order.s3.eu-west-3.amazonaws.com/wc-ai...", local_path: "storage/TPH_EU/EU12345/TPH001-71/print_file_1_prin...", asset_type: "print_file_1", created_at: "2025-11-25 13:02:29.449041000 +0000", updated_at: "2025-11-25 13:02:30.275154000 +0000", imported_at: "2025-11-25 16:53:07.697860000 +0000", deleted_at: nil>, #<Asset id: 8, order_item_id: 6, original_url: "https://thepickshouse.com/wp-content/uploads/lumis...", local_path: "storage/TPH_EU/EU12345/TPH001-71/print_file_1_AMby...", asset_type: "print_file_1", created_at: "2025-11-25 13:02:29.475051000 +0000", updated_at: "2025-11-25 13:02:32.113306000 +0000", imported_at: "2025-11-25 16:53:07.697860000 +0000", deleted_at: nil>, #<Asset id: 9, order_item_id: 6, original_url: "https://thepickshouse.com/wp-content/uploads/lumis...", local_path: "storage/TPH_EU/EU12345/TPH001-71/screenshot_1_Mv3r...", asset_type: "screenshot_1", created_at: "2025-11-25 13:02:29.477930000 +0000", updated_at: "2025-11-25 13:02:32.557306000 +0000", imported_at: "2025-11-25 16:53:07.697860000 +0000", deleted_at: nil>, #<Asset id: 7, order_item_id: 5, original_url: "https://tph-order.s3.eu-west-3.amazonaws.com/wc-ai...", local_path: "storage/TPH_EU/EU12345/TPH001-71/screenshot_1_scre...", asset_type: "screenshot_1", created_at: "2025-11-25 13:02:29.465857000 +0000", updated_at: "2025-11-25 13:02:31.532812000 +0000", imported_at: "2025-11-25 16:53:07.697860000 +0000", deleted_at: nil>]>, @preview_space="7.55 MB", @_out_buf=nil>
file: admin_cleanup.erb location: block in __tilt_4600 line: 137